[{"/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/index.js":"1","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/serviceWorker.js":"2","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/pages/App/App.js":"3","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/pages/SignupPage/SignupPage.jsx":"4","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/pages/LoginPage/LoginPage.jsx":"5","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/hooks/useForm.js":"6","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/utils/userService.js":"7","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/components/ErrorMessage/ErrorMessage.jsx":"8","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/utils/tokenService.js":"9"},{"size":595,"mtime":1611009851880,"results":"10","hashOfConfig":"11"},{"size":5086,"mtime":1610734296686,"results":"12","hashOfConfig":"11"},{"size":893,"mtime":1611031250763,"results":"13","hashOfConfig":"11"},{"size":4025,"mtime":1611020600668,"results":"14","hashOfConfig":"11"},{"size":2518,"mtime":1611033969299,"results":"15","hashOfConfig":"11"},{"size":312,"mtime":1610734296683,"results":"16","hashOfConfig":"11"},{"size":1227,"mtime":1611029613161,"results":"17","hashOfConfig":"11"},{"size":132,"mtime":1610734296683,"results":"18","hashOfConfig":"11"},{"size":903,"mtime":1611028474591,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"1tr13u0",{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"22"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"22"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"22"},"/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/index.js",[],["42","43"],"/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/serviceWorker.js",[],"/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/pages/App/App.js",["44"],"/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/pages/SignupPage/SignupPage.jsx",["45","46","47","48","49"],"import React, { useState, useRef, useEffect } from \"react\";\nimport \"./SignupPage.css\";\nimport ErrorMessage from \"../../components/ErrorMessage/ErrorMessage\";\nimport { Button, Form, Grid, Header, Image, Segment } from \"semantic-ui-react\";\nimport { useForm } from \"../../hooks/useForm\";\nimport userService from \"../../utils/userService\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function SignupPage(props) {\n  const [invalidForm, setValidForm] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [selectedFile, setSelectedFile] = useState(\"\");\n  const [state, setState] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    passwordConf: \"\",\n  });\n\n  const history = useHistory();\n\n  function handleChange(e) {\n    setState({\n      ...state,\n      [e.target.name]: e.target.value,\n    });\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    // Photos have to be sent over using FormData,\n    // they are sent over to the server in multiple requests\n    const formData = new FormData();\n    formData.append(\"photo\", selectedFile);\n\n    for (let fieldName in state) {\n      console.log(fieldName, state[fieldName]);\n      // append the rest of the data to the form obejct\n      formData.append(fieldName, state[fieldName]);\n    }\n\n    try {\n      console.log(formData.forEach((item) => console.log(item)));\n\n      // use the userService to make the fetch request\n      await userService.signup(formData);\n\n      // Route to wherever you want!\n      // after you get a response from the server from\n      // the signup request, you need to grab the token from\n      // local storage and set the user!\n      props.handleSignupOrLogin();\n      history.push(\"/\");\n    } catch (err) {\n      // Invalid user data (probably duplicate email)\n      console.log(err.message);\n      setError(err.message);\n    }\n  }\n\n  function handleFileInput(e) {\n    console.log(e.target.files, \"this is e.target.files\");\n    setSelectedFile(e.target.files[0]);\n  }\n\n  //key should be password\n  return (\n    <>\n      <Grid\n        textAlign=\"center\"\n        style={{ height: \"100vh\" }}\n        verticalAlign=\"middle\"\n      >\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h2\" color=\"teal\" textAlign=\"center\">\n            Sign Up\n          </Header>\n          <Form autoComplete=\"off\" onSubmit={handleSubmit}>\n            <Segment stacked>\n              <Form.Input\n                name=\"username\"\n                placeholder=\"username\"\n                value={state.username}\n                onChange={handleChange}\n                required\n              />\n              <Form.Input\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"email\"\n                value={state.email}\n                onChange={handleChange}\n                required\n              />\n              <Form.Input\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"password\"\n                value={state.password}\n                onChange={handleChange}\n                required\n              />\n              <Form.Input\n                name=\"passwordConf\"\n                type=\"password\"\n                placeholder=\"Confirm Password\"\n                value={state.passwordConf}\n                onChange={handleChange}\n                required\n              />\n              <Form.Field>\n                <span style={{ textAlign: \"left\" }}>\n                  Upload a profile Picture\n                </span>\n                <Form.Input\n                  type=\"file\"\n                  name=\"photo\"\n                  placeholder=\"upload image\"\n                  onChange={handleFileInput}\n                />\n              </Form.Field>\n              <Button type=\"submit\" className=\"btn\" disabled={invalidForm}>\n                Signup\n              </Button>\n            </Segment>\n            {error ? <ErrorMessage error={error} /> : null}\n          </Form>\n        </Grid.Column>\n      </Grid>\n    </>\n  );\n}\n","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/pages/LoginPage/LoginPage.jsx",["50","51"],"/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/hooks/useForm.js",[],"/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/utils/userService.js",["52"],"import tokenService from \"./tokenService\";\n\nconst BASE_URL = \"/api/users/\";\n\n//if you upload a photo, make sure that you delete the headers\n//because you have to send multipart form request\nfunction signup(user) {\n  return (\n    fetch(BASE_URL + \"signup\", {\n      method: \"POST\",\n      body: user,\n    })\n      .then((res) => {\n        if (res.ok) return res.json();\n        // Probably a duplicate email\n        throw new Error(\"Email already taken!\");\n      })\n      // Parameter destructuring!\n      .then(({ token }) => tokenService.setToken(token))\n  );\n  // The above could have been written as\n  //.then((token) => token.token);\n}\n\nfunction getUser() {\n  return tokenService.getUserFromToken();\n}\n\nfunction logout() {\n  tokenService.removeToken();\n}\n\nfunction login(creds) {\n  return fetch(BASE_URL + \"login\", {\n    method: \"POST\",\n    headers: new Headers({ \"Content-Type\": \"application/json\" }),\n    body: JSON.stringify(creds),\n  })\n    .then((res) => {\n      // Valid login if we have a status of 2xx (res.ok)\n      if (res.ok) return res.json();\n      throw new Error(\"Bad Credentials!\");\n    })\n    .then(({ token }) => tokenService.setToken(token));\n}\n\nexport default {\n  signup,\n  getUser,\n  logout,\n  login,\n};\n","/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/components/ErrorMessage/ErrorMessage.jsx",[],"/Users/jeremydurden/code/mern-boilerplate-from-jim/project4/src/utils/tokenService.js",["53"],"function setToken(token) {\n  if (token) {\n    // localStorage is given to us by the browser\n    localStorage.setItem(\"token\", token);\n  } else {\n    localStorage.removeItem(\"token\");\n  }\n}\n\nfunction getToken() {\n  let token = localStorage.getItem(\"token\");\n  if (token) {\n    // Check if expired, remove if it is\n    // atob is a function that decodes a base-64 string\n    const payload = JSON.parse(atob(token.split(\".\")[1]));\n    // JWT's exp is expressed in seconds, not milliseconds, so convert\n    if (payload.exp < Date.now() / 1000) {\n      localStorage.removeItem(\"token\");\n      token = null;\n    }\n  }\n  return token;\n}\n\nfunction getUserFromToken() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split(\".\")[1])).user : null;\n}\n\nfunction removeToken() {\n  localStorage.removeItem(\"token\");\n}\n\nexport default {\n  setToken,\n  getToken,\n  removeToken,\n  getUserFromToken,\n};\n",{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","severity":1,"message":"59","line":9,"column":10,"nodeType":"60","messageId":"61","endLine":9,"endColumn":14},{"ruleId":"58","severity":1,"message":"62","line":1,"column":27,"nodeType":"60","messageId":"61","endLine":1,"endColumn":33},{"ruleId":"58","severity":1,"message":"63","line":1,"column":35,"nodeType":"60","messageId":"61","endLine":1,"endColumn":44},{"ruleId":"58","severity":1,"message":"64","line":4,"column":38,"nodeType":"60","messageId":"61","endLine":4,"endColumn":43},{"ruleId":"58","severity":1,"message":"65","line":5,"column":10,"nodeType":"60","messageId":"61","endLine":5,"endColumn":17},{"ruleId":"58","severity":1,"message":"66","line":10,"column":23,"nodeType":"60","messageId":"61","endLine":10,"endColumn":35},{"ruleId":"58","severity":1,"message":"64","line":11,"column":3,"nodeType":"60","messageId":"61","endLine":11,"endColumn":8},{"ruleId":"58","severity":1,"message":"66","line":17,"column":23,"nodeType":"60","messageId":"61","endLine":17,"endColumn":35},{"ruleId":"67","severity":1,"message":"68","line":47,"column":1,"nodeType":"69","endLine":52,"endColumn":3},{"ruleId":"67","severity":1,"message":"68","line":34,"column":1,"nodeType":"69","endLine":39,"endColumn":3},"no-native-reassign",["70"],"no-negated-in-lhs",["71"],"no-unused-vars","'user' is assigned a value but never used.","Identifier","unusedVar","'useRef' is defined but never used.","'useEffect' is defined but never used.","'Image' is defined but never used.","'useForm' is defined but never used.","'setValidForm' is assigned a value but never used.","import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation"]